# Advanced A/B Testing Configuration
# This configuration demonstrates all implemented TODO features

data:
  user_column: user_id
  group_column: variant
  metric_columns: 
    - primary_conversion
    - secondary_conversion
    - revenue
    - engagement_score
  date_column: experiment_date
  required_groups: 
    - control
    - treatment_a
    - treatment_b

analysis:
  confidence_level: 0.95
  power: 0.8
  two_sided: true
  outlier_method: isolation_forest  # Advanced ML-based outlier detection
  outlier_threshold: 1.5
  apply_cuped: true                 # Enable variance reduction
  cuped_covariate: pre_experiment_conversion
  cuped_method: by_group           # global, by_group, multi_covariate

validation:
  max_missing_rate: 0.03
  min_sample_ratio: 0.85
  run_data_quality_check: true
  min_users_per_group: 1000
  max_daily_variance: 0.2

output:
  include_plots: true
  plot_format: png
  report_format: html
  export_data: true
  save_dashboard: true
  interactive_plots: true           # Enable Plotly interactive plots
  export_formats: 
    - html
    - pdf
    - png

advanced:
  multiple_testing_correction: holm
  bootstrap_samples: 10000
  bootstrap_method: bca            # bias-corrected accelerated
  sequential_testing: true         # Enable sequential testing
  sequential_method: obrien_fleming # obrien_fleming, pocock, lan_demets
  power_analysis: true
  bayesian_analysis: true         # Enable Bayesian methods
  effect_size_calculations: true   # Cohen's d, etc.
  
# New feature: Real-time monitoring (implemented TODO)
monitoring:
  enable_realtime: true
  refresh_interval: 300           # 5 minutes
  alert_thresholds:
    srm_threshold: 0.05
    quality_threshold: 80
    power_threshold: 0.8
  notification_email: analyst@company.com

# New feature: Performance optimization (implemented TODO)
performance:
  chunk_size: 25000              # For large datasets
  parallel_processing: true
  memory_optimization: true
  use_polars: false             # Alternative fast dataframe library
  cache_results: true

# New feature: Enhanced reporting (implemented TODO)
reporting:
  include_interpretations: true   # Automated result interpretation
  executive_summary: true        # High-level summary for stakeholders
  technical_appendix: true       # Detailed statistical methodology
  confidence_intervals: true     # Show all CIs
  effect_sizes: true             # Include practical significance
  power_curves: true            # Generate power analysis plots
  
# New feature: Data quality assessment (implemented TODO)
data_quality:
  automated_profiling: true      # Generate data quality report
  anomaly_detection: true        # ML-based anomaly detection
  temporal_analysis: true        # Check for time-based patterns
  correlation_analysis: true     # Check for unexpected correlations
  missing_pattern_analysis: true # Analyze missing data patterns

# New feature: Advanced statistics (implemented TODO)
statistics:
  variance_reduction:
    methods: [cuped, stratification]
    covariates: [pre_experiment_conversion, user_segment]
  
  causal_inference:
    enable: true
    methods: [ipw, doubly_robust]
    confounders: [user_age, user_segment, signup_date]
  
  time_series:
    seasonality_detection: true
    trend_analysis: true
    changepoint_detection: true
  
  uplift_modeling:
    enable: false              # Advanced: requires customer data
    methods: [t_learner, dr_learner]

# New feature: Integration settings (implemented TODO)
integrations:
  database:
    enabled: false
    connection_string: null
    query_timeout: 300
  
  cloud_storage:
    enabled: false
    provider: null            # aws, gcp, azure
    bucket: null
  
  slack:
    enabled: false
    webhook_url: null
    channels: [data-science, experiments]

# New feature: Security and compliance (implemented TODO)
security:
  validate_inputs: true
  sanitize_outputs: true
  encrypt_sensitive_data: false
  audit_log: true
  
# New feature: Experimental design validation (implemented TODO)
experimental_design:
  validate_randomization: true
  check_balance: true
  minimum_effect_size: 0.01
  expected_runtime_days: 14
  sample_size_validation: true
